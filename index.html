<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>R O L L E D</title>
  <script src="https://cdn.jsdelivr.net/npm/typesense@2/dist/typesense.min.js"></script>
  <script>
    var typesense = new Typesense.Client({
      'nodes': [
        {
          'host': 'localhost',
          'port': '8108',
          'protocol': 'http'
        },
      ],
      'apiKey': 'goodbyeenvygoodbyesorrowyouwerelegendary',
      'numRetries': 3,
      'connectionTimeoutSeconds': 2,
      'retryIntervalSeconds': 0.1,
      'healthcheckIntervalSeconds': 2,
      'logLevel': 'debug'
    })

    function search () {
      var searchTerm = document.getElementById('search-input').value
      typesense.collections('albums').documents().search({
        'q': searchTerm,
        'query_by': 'album_title,artist_name'
      }).then(function (searchResults) {
        document.getElementById('search-results').innerHTML = JSON.stringify(searchResults, null, 2)
      }).catch(function (error) {
        document.getElementById('search-results').innerHTML = error
      })
    }

  </script>
</head>
<body>
<div>
    <div id="header">
      <h1>R O L L E D</h1>
    </div>

    <div>
        <input
          onchange="search();"
          onkeypress = "this.onchange();"
          onpaste    = "this.onchange();"
          oninput    = "this.onchange();"
          id="search-input"
          type="text"
          placeholder="search terms"
        />
    </div>
    <pre id="search-results">
    </pre>
</div>
</body>
</html>
